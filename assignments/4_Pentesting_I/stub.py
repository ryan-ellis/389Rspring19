"""
    Use the same techniques such as (but not limited to):
        1) Sockets
        2) File I/O
        3) raw_input()

    from the OSINT HW to complete this assignment. Good luck!
"""

import socket
import subprocess
import time

host = "1337bank.money" # IP address here
port = 1337 # Port here

def execute_cmd(cmd):
    """
        Sockets: https://docs.python.org/2/library/socket.html
        How to use the socket s:

            # Establish socket connection
            s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
            s.connect((host, port))

            Reading:

                data = s.recv(1024)     # Receives 1024 bytes from IP/Port
                print(data)             # Prints data

            Sending:

                s.send("something to send\n")   # Send a newline \n at the end of your command
    """
    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    s.connect((host, port))
    time.sleep(5)
    s.sendall(b'192.168.1.1')
    time.sleep(5)
    data = s.recv(1024)
    s.close()
    print("This is the response:")
    print(repr(data))
    return 1


if __name__ == '__main__':
    initial_input = input("> ")
    if initial_input == "shell":
        shell_input = input("/> ")
        while(shell_input != "exit"):
            status = execute_cmd(shell_input)
            if status == 0:
                shell_input = input("> ")
            else:
                break
    print("Exiting shell . . . ")
